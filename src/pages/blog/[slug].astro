---
import { getCollection } from 'astro:content'
import Text from '@layouts/Text.astro';
import BlogBanner from '@components/Blog-banner.astro'

export async function getStaticPaths() {
	const blogs = await getCollection('blog');
	return blogs.map(blog => ({
		params: { slug: blog.slug }, props: { blog }
	}))
}

const { blog } = Astro.props;
const { Content } = await blog.render();
---
<Text title={blog.data.title} description={blog.data.description} image={blog.data.thumbnail}>
	<BlogBanner slot="full" thumbnail={`/covers/${blog.data.thumbnail}`} thumbnail_alt={blog.data.thumbnail_alt} title={blog.data.title} tone={blog.data.tone} date={blog.data.date} centered='true' />
	<Content slot="text" />
</Text>